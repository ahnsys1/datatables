<div class="container modal-content">

    <form #employeeForm="ngForm" (ngSubmit)="onSubmit(employeeForm)">

        <h2 class="text-center m-2">{{ getModalTitle() | translate }}</h2>


        <div class="form-group m-2">
            <label>{{ 'name' | translate }}</label>
            <input type="text" class="form-control" placeholder="Enter name" #name="ngModel" name="name" required
                matInput [(ngModel)]="employeeObject.name" (ngModelChange)="onNameChange($event)"
                [matAutocomplete]="auto">
            <mat-autocomplete #auto="matAutocomplete" panelClass="yellow-autocomplete-panel"
                (optionSelected)="onEmployeeSelected($event.option.value)">
                <mat-option *ngFor="let employee of filteredEmployees$ | async" [value]="employee">
                    {{ employee.name }}
                </mat-option>
            </mat-autocomplete>

            <div *ngIf="name.invalid && (name.dirty || name.touched)" class="text-danger">
                {{ 'name-is-required' | translate }}
            </div>
            <div *ngIf="employeeNameExists && (name.dirty || name.touched)">
                {{ 'employee-name-exists' | translate }}
            </div>
        </div>




        <div class="form-group m-2">
            <label>{{ 'position' | translate }}</label>
            <input type="text" class="form-control" placeholder="Enter position" #position="ngModel" name="position"
                required matInput [(ngModel)]="employeeObject.position">
            <div *ngIf="position.invalid && (position.dirty || position.touched)" class="text-danger">
                Position is required.
            </div>
        </div>

        <div class="form-group m-2">
            <label>Manager</label>
            <select class="form-control" name="manager" #manager="ngModel" [(ngModel)]="employeeObject.manager"
                [compareWith]="compareEmployees">
                <option *ngFor="let m of managers" [ngValue]="m">
                    {{m.name}}
                </option>
            </select>
        </div>

        <div class="form-group m-2">
            <label>Has Manager Rights</label>
            <input type="checkbox" class="form-check-input" name="hasManagerRights"
                [(ngModel)]="employeeObject.hasManagerRights">
        </div>


        <div class="form-group m-2">
            <label>Salary</label>
            <input type="number" class="form-control" placeholder="Enter salary" #salary="ngModel" name="salary"
                required min="0" matInput [(ngModel)]="employeeObject.salary">
            <div *ngIf="salary.invalid && (salary.dirty || salary.touched)" class="text-danger">
                <div *ngIf="salary.errors?.['required']">Salary is required.</div>
                <div *ngIf="salary.errors?.['min']">Salary must be a positive number.</div>
            </div>
        </div>

        <div class="form-group m-2">
            <label>Start Date</label>
            <input id="startDate" type="text" class="form-control" name="start_date" #start_date="ngModel" required
                [(ngModel)]="employeeObject.start_date" />
            <div *ngIf="start_date?.invalid && (start_date?.dirty || start_date?.touched)" class="text-danger">
                Start date is required.
            </div>
        </div>
        <!-- <script>
            $(function () {
                $("#startDate").datepicker({
                    dateFormat: 'yy-M-dd',
                    onSelect: function (dateText) {
                        employeeObject.start_date = dateText;
                    }
                });
            });
        </script> -->

        <div class="form-group m-2">
            <label>Office</label>
            <input type="text" class="form-control" placeholder="Enter office" #office="ngModel" name="office" required
                matInput [(ngModel)]="employeeObject.office">
            <div *ngIf="office.invalid && (office.dirty || office.touched)" class="text-danger">
                Office is required.
            </div>
        </div>
        <div class="form-group m-2">
            <label>Extension</label>
            <input type="text" class="form-control" placeholder="Enter extension" #extn="ngModel" name="extn" required
                matInput [(ngModel)]="employeeObject.extn">
            <div *ngIf="extn.invalid && (extn.dirty || extn.touched)" class="text-danger">
                Extension is required.
            </div>
        </div>

        <input type="hidden" class="form-control" #id="ngModel" name="id" [(ngModel)]="employeeObject.id">


        <div class="button-group m-2">
            <button type="submit" class="btn btn-success m-2" [disabled]="!employeeForm.valid">
                Submit
            </button>

            <button matInput type="button" class="btn btn-secondary m-2" (click)="onClose()">
                Close
            </button>
        </div>

    </form>

</div>